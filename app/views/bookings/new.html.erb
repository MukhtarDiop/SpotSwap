<div class="container" data-controller="date-validation">
  <h1>Request Booking</h1>
  <p>Select the start and end dates for your booking at <strong><%= @spot.description %></strong></p>
  
  <% if @booking.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= pluralize(@booking.errors.count, "error") %> prohibited this booking from being saved:</h4>
      <ul>
        <% @booking.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= simple_form_for [@spot, @booking] do |f| %>
    <%= f.input :start_date,
                as: :string,
                input_html: { 
                  type: "date",
                  min: Date.current.to_s,
                  "data-date-validation-target": "startDate",
                  "data-action": "input->date-validation#updateEndDateMin"
                } %>
    <%= f.input :end_date,
                as: :string,
                input_html: { 
                  type: "date",
                  min: Date.current.to_s,
                  "data-date-validation-target": "endDate"
                } %>
    <%= f.submit "Request booking", class: "btn btn-primary" %>
  <% end %>
</div>
